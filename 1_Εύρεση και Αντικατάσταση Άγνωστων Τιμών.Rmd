---
title: "Πως γεμίζουμε κενές τιμές στην R"
output: html_document
date: "2024-12-08"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### Εισαγωγή

Εργάζεστε με ένα σύνολο δεδομένων στο R που του λείπουν τιμές; Μην ανησυχείτε, τα περιβαλλοντικά δεδομένα πολύ συχνά έχουν κενές τιμές, είτε γιατί κάποιος αισθητήρας δεν λειτουργησε σωστά είτε γιατί κάποια καταγραφή, όπως η δορυφορική, δέχθηκε παρεμβολές (π.χ., σύννεφα).

Σε αυτό το μάθημα θα καλύψουμε διάφορες τεχνικές για τον αποτελεσματικό χειρισμό και την αντικατάσταση τιμών που λείπουν σε διανύσματα, πλαίσια δεδομένων και συγκεκριμένες στήλες.

### Κατανόηση των τιμών που λείπουν στην R

Στην R, οι τιμές που λείπουν αντιπροσωπεύονται από την ένδειξη NA (Not Available - Μη Διαθέσιμη). Αυτές οι τιμές NA μπορούν να προκαλέσουν προβλήματα στην ανάλυση και στους υπολογισμούς. Είναι σημαντικό να τις χειρίζεστε κατάλληλα για να εξασφαλίσετε ακριβή αποτελέσματα.

Οι τιμές που λείπουν μπορεί να προκύψουν για διάφορους λόγους: • Δεδομένα δεν συλλέχθηκαν ή δεν καταγράφηκαν • Χάθηκαν δεδομένα κατά την επεξεργασία • Σφάλματα στην εισαγωγή δεδομένων

Η γλώσσα R παρέχει διάφορες λειτουργίες και τεχνικές για τον αποτελεσματικό εντοπισμό, χειρισμό και αντικατάσταση τιμών που λείπουν.

### Προσδιορισμός τιμών που λείπουν

Πριν αντικαταστήσουμε τις τιμές που λείπουν, ας μάθουμε πώς να τις προσδιορίσουμε στην R.

#### Α) Στα Διανύσματα

Για να ελέγξετε για τιμές που λείπουν σε ένα διάνυσμα, χρησιμοποιήστε τη συνάρτηση is.na():

```{r}
x <- c(1, 2, NA, 4, NA)
is.na(x)
```

#### B) Σε Πλαίσια Δεδομένων

Για να ελέγξετε τιμές που λείπουν σε ένα πλαίσιο δεδομένων, χρησιμοποιείστε την συνάρτηση is.na() μαζί με την apply():

```{r}
df <- data.frame(x = c(1, 2, NA), 
                 y = c("a", NA, "c"))
apply(df, 2, function(x) any(is.na(x)))
```

Οι παραπάνω εντολές ελέγχουν κάθε στήλη του πλαισίου δεδομένων για τιμές που λείπουν.

### Αντικατάσταση τιμών που λείπουν

Τώρα που ξέρουμε πώς να βρίσκουμε τις τιμές που λείπουν, ας εξερευνήσουμε τεχνικές για την αντικατάστασή τους.

#### Α) Στα Διανύσματα

Για να αντικαταστήσετε τις τιμές που λείπουν σε ένα διάνυσμα, χρησιμοποιήστε τη συνάρτηση is.na() σε συνδυασμό με λογικό υποσύνολο:

```{r}
x <- c(1, 2, NA, 4, NA)
x[is.na(x)] <- 0
x
```

Εδώ αντικαθιστούμε τις τιμές NA με το 0. Φυσικά, μπορείτε να αντικαταστήσετε με οποιαδήποτε τιμή.

#### Β) Στα Πλαίσια Δεδομένων (Dataframes)

Για να αντικαταστήσουμε τιμές που λείπουν σε ένα πλαίσιο δεομένων χρησιμοποιούμε την συνάρτηση is.na() μαζί με την συνάρτηση replace():

```{r}
df <- data.frame(x = c(1, 2, NA), 
                 y = c("a", NA, "c"))
df[is.na(df)] <- 0
df
```

Έτσι κάνουμε αντικατάσταση όλων των τιμών που λείπουν με την τιμή 0 σε ένα πλαίσιο δεδομένων.

#### Γ) Σε συγκεκριμένες στήλες

Για να αντικαταστήσω τιμές που λείπουν σε συγκεκριμένες στήλες ενός πλαισίου δεδομένων κάνω τα εξής:

Χρησιμοποιώ την is.na() σε ένα λογικό υποσύνολο, δηλ. στην στήλη που έχει κενές τιμές:

```{r}
df <- data.frame(x = c(1, 2, NA), 
                 y = c("a", NA, "c"))
df$x[is.na(df$x)] <- 0
df
```

Βρίσκω λοιπόν ότι η στήλη y έχει κενές τιμές και κατόπιν με την συνάρτηση replace()

```{r}
df <- data.frame(x = c(1, 2, NA), 
                 y = c("a", NA, "c"))
df$y <- replace(df$y, is.na(df$y), "missing")
df
```

### Αντικατάσταση με χρήση Στατιστικών Παραμέτρων

Αντί να αντικαταστήσουμε τις άγνωστες τιμές με μία σταθερή τιμή, μπορείτε να χρησιμοποιήσετε στατιστικές παραμέτρους, όπως η μέση τιμή ή η διάμεσος των υπολοίπων τιμών της στήλης του πλαισίου δεδομένων.

#### Αντικατάσταση με τον Αριθμητικό Μέσο

Για να αντικαταστήσουμε τις άγνωστες τιμές με αυτές του αριθμητικού μέσου μίας στήλης:

```{r}
df <- data.frame(x = c(1, 2, NA, 4))
mean_x <- mean(df$x, na.rm = TRUE)
df$x[is.na(df$x)] <- mean_x
df
```

#### Αντικατάσταση με την Διάμεσο

Για να αντικαταστήσουμε άγνωστες τιμές με την διάμεσο μίας στήλης:

```{r}
df <- data.frame(x = c(1, 2, NA, 4, 5))
median_x <- median(df$x, na.rm = TRUE)
df$x[is.na(df$x)] <- median_x
df
```

### Συμπέρασμα

Η διαχείριση των άγνωστων τιμών, δηλ. τιμών που δεν μετρήθηκαν για κάποιο λόγο, είναι πολύ συχνή στα θέματα του περιβάλλοντος και αποτελεί βασικό βήμα της προ-επεξεργασίας και της ανάλυσης δεδομένων. Η R προσφέρει διάφορες συναρτήσεις και τεχνικές για να αντικαταστήσετε άγνωστες τιμές. Μόλις ολοκληρώσετε την προ-επεξεργασία τα δεδομένα σας είναι έτοιμα για οπιαδήποτε επιπλέον ανάλυση.
